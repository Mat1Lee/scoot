<!-- HTML cho sidebar -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Channel Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <!-- Font Awesome cho icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style/style.css">
    <style>
      
    </style>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo">
                <img src="images/logo-side.png" alt="Clear Channel">
            </div>
            <div class="user-profile">
                <div class="user-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="24" viewBox="0 0 23 24" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 23.5C17.8514 23.5 23 18.3514 23 12C23 5.64855 17.8514 0.5 11.5 0.5C5.14855 0.5 0 5.64855 0 12C0 18.3514 5.14855 23.5 11.5 23.5ZM14.95 9.7C14.95 10.615 14.5865 11.4925 13.9395 12.1395C13.2925 12.7865 12.415 13.15 11.5 13.15C10.585 13.15 9.70748 12.7865 9.06048 12.1395C8.41348 11.4925 8.05 10.615 8.05 9.7C8.05 8.785 8.41348 7.90748 9.06048 7.26048C9.70748 6.61348 10.585 6.25 11.5 6.25C12.415 6.25 13.2925 6.61348 13.9395 7.26048C14.5865 7.90748 14.95 8.785 14.95 9.7ZM4.6 17.75C5.40271 16.6781 6.44433 15.8081 7.64211 15.2092C8.8399 14.6103 10.1608 14.299 11.5 14.3C12.8392 14.299 14.1601 14.6103 15.3579 15.2092C16.5557 15.8081 17.5973 16.6781 18.4 17.75C17.5973 18.8219 16.5557 19.6919 15.3579 20.2908C14.1601 20.8897 12.8392 21.201 11.5 21.2C10.1608 21.201 8.8399 20.8897 7.64211 20.2908C6.44433 19.6919 5.40271 18.8219 4.6 17.75Z" fill="#44424B"/>
                      </svg>
                </div>
                <div class="user-info">
                    <h3 class="user-name">John Tan</h3>
                    
                </div>
            </div>
            
            <div class="divider">LOOKER PRO</div>
            <nav class="nav-menu">
                <ul>
                    <li class="nav-item">
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                                <path d="M8.99724 18.7992V12.795H13.9972V18.7992C13.9972 19.4596 14.5597 20 15.2472 20H18.9972C19.6847 20 20.2472 19.4596 20.2472 18.7992V10.3933H22.3721C22.9471 10.3933 23.2221 9.7088 22.7846 9.34854L12.3347 0.306214C11.8597 -0.102071 11.1347 -0.102071 10.6597 0.306214L0.209813 9.34854C-0.215183 9.7088 0.0473145 10.3933 0.62231 10.3933H2.74729V18.7992C2.74729 19.4596 3.30979 20 3.99728 20H7.74725C8.43475 20 8.99724 19.4596 8.99724 18.7992Z" fill="white"/>
                              </svg>
                            <h3>Dashboard</h3>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="20" viewBox="0 0 23 20" fill="none">
                                <path d="M21.2308 0.142822H1.76923C1.3 0.142822 0.849991 0.331644 0.518196 0.667748C0.1864 1.00385 0 1.45971 0 1.93503V18.0649C0 18.5402 0.1864 18.9961 0.518196 19.3322C0.849991 19.6683 1.3 19.8571 1.76923 19.8571H21.2308C21.7 19.8571 22.15 19.6683 22.4818 19.3322C22.8136 18.9961 23 18.5402 23 18.0649V1.93503C23 1.45971 22.8136 1.00385 22.4818 0.667748C22.15 0.331644 21.7 0.142822 21.2308 0.142822ZM21.2308 1.93503V6.41555H1.76923V1.93503H21.2308ZM1.76923 8.20776H7.96154V18.0649H1.76923V8.20776ZM21.2308 18.0649H9.73077V8.20776H21.2308V18.0649Z" fill="#44424B"/>
                            </svg>
                            <h3>Campaigns</h3>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="user.html">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="14" viewBox="0 0 23 14" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M4.63778 10.8247C4.38588 10.7892 4.1181 10.7692 3.83333 10.7692C1.73595 10.7692 0.564594 11.8575 0.115547 12.3997C0.0427135 12.4928 0.00383541 12.607 0.00383541 12.7249C0.00383541 12.7282 0.00383153 12.7314 0.00328391 12.7341C-1.80493e-06 12.9333 0 13.1972 0 13.4615C0 13.7588 0.245333 14 0.547619 14H4.47514C4.41326 13.8288 4.38095 13.6468 4.38095 13.4615C4.38095 12.8488 4.38095 12.1186 4.38314 11.6873C4.38314 11.3804 4.4724 11.0815 4.63778 10.8247ZM16.9762 14H6.02381C5.87869 14 5.73905 13.9435 5.63664 13.8422C5.53369 13.7415 5.47619 13.6042 5.47619 13.4615C5.47619 12.8504 5.47619 12.1235 5.47838 11.6905C5.47838 11.6895 5.47838 11.6884 5.47838 11.6873C5.47838 11.5635 5.52219 11.4439 5.6016 11.3481C6.28119 10.5851 8.33476 8.61539 11.5 8.61539C15.0825 8.61539 16.8815 10.5813 17.4318 11.3228C17.4926 11.4138 17.5238 11.5166 17.5238 11.6216V13.4615C17.5238 13.6042 17.4663 13.7415 17.3634 13.8422C17.261 13.9435 17.1213 14 16.9762 14ZM18.5249 14H22.4524C22.7547 14 23 13.7588 23 13.4615V12.7244C23 12.6054 22.96 12.4902 22.8866 12.3959C22.4354 11.8575 21.2635 10.7692 19.1667 10.7692C18.8967 10.7692 18.642 10.787 18.4022 10.8193C18.544 11.0632 18.619 11.34 18.619 11.6227V13.4615C18.619 13.6468 18.5867 13.8288 18.5249 14ZM3.83333 4.30769C2.3219 4.30769 1.09524 5.51385 1.09524 7C1.09524 8.48615 2.3219 9.69231 3.83333 9.69231C5.34476 9.69231 6.57143 8.48615 6.57143 7C6.57143 5.51385 5.34476 4.30769 3.83333 4.30769ZM19.1667 4.30769C17.6552 4.30769 16.4286 5.51385 16.4286 7C16.4286 8.48615 17.6552 9.69231 19.1667 9.69231C20.6781 9.69231 21.9048 8.48615 21.9048 7C21.9048 5.51385 20.6781 4.30769 19.1667 4.30769ZM11.5 0C9.38455 0 7.66667 1.68915 7.66667 3.76923C7.66667 5.84931 9.38455 7.53846 11.5 7.53846C13.6155 7.53846 15.3333 5.84931 15.3333 3.76923C15.3333 1.68915 13.6155 0 11.5 0Z" fill="#44424B"/>
                              </svg>
                            <h3>Users</h3>
                            <i class="fas fa-chevron-right arrow"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="24" viewBox="0 0 40 41" fill="none">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 3.22217H3V14.7222H14.5V3.22217ZM37 3.22217H25.5V14.7222H37V3.22217ZM37 25.7222H25.5V37.2222H37V25.7222ZM14.5 25.7222H3V37.2222H14.5V25.7222ZM3 0.222168H0V3.22217V14.7222V17.7222H3H14.5H17.5V14.7222V3.22217V0.222168H14.5H3ZM25.5 0.222168H22.5V3.22217V14.7222V17.7222H25.5H37H40V14.7222V3.22217V0.222168H37H25.5ZM37 22.7222H40V25.7222V37.2222V40.2222H37H25.5H22.5V37.2222V25.7222V22.7222H25.5H37ZM3 22.7222H0V25.7222V37.2222V40.2222H3H14.5H17.5V37.2222V25.7222V22.7222H14.5H3Z" fill="#44424B"/>
                              </svg>
                            <h3>Audit Trail</h3>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>
        <main class="main-content">
           <div class="main-content__top">
            <h1 class="title">
                Edit User
            </h1>
            <div class="button-group">
                <div class="button-group__add btn-add">
                    CREATE
                </div>
                <div class="button-group__cancel btn-cancel">
                    CANCEL
                </div>
            </div>
           </div>
           <div class="user-form">
            <form>
              <div class="form-row">
                <div class="form-group">
                  <label for="userName">User Name</label>
                  <div class="form-control">
                    <input type="text" id="userName" placeholder="User name">
                  </div>
                </div>
                <div class="form-group">
                  <label for="userRole">User Role</label>
                  <div class="form-control">
                    <select id="userRole">
                      <option value="" selected disabled>User Role</option>
                      <option value="admin">Admin</option>
                      <option value="user">User</option>
                      <option value="moderator">Moderator</option>
                    </select>
                  </div>
                </div>
              </div>
        
              <div class="form-row">
                <div class="form-group">
                  <label for="email">Email</label>
                  <div class="form-control">
                    <input type="email" id="email" placeholder="example@email.com">
                  </div>
                </div>
                <div class="form-group">
                  <label for="contact">Contact</label>
                  <div class="form-control phone-input">
                    <!-- <input type="text" class="country-code" value="65" readonly> -->
                    <select cllass="country-code" id="country-code">
                        <option value="65" selected disabled>65</option>
                        <option value="84">84</option>
                        <option value="66">66</option>
                        <option value="68">68</option>
                      </select>
                    <input type="tel" id="contact" placeholder="9123 4567">
                  </div>
                </div>
              </div>
        
              <div class="form-row">
                <div class="form-group">
                  <label for="password">Create Password</label>
                  <div class="form-control password-input">
                    <input class="password" type="password" id="password" placeholder="Password">
                    <button type="button" class="toggle-password">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="form-group">
                  <label for="confirmPassword">Re-enter Password</label>
                  <div class="form-control password-input">
                    <input class="password" type="password" id="confirmPassword" placeholder="Re-enter your password">
                    <button type="button" class="toggle-password">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </form>
            <p class="error"
            id="error">

            </p>
          </div>
            
        </main>
    </div>
</body>
<script>
    //function active 
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            navItems.forEach(item => item.classList.remove('active'));
            item.classList.add('active');
        });
    })
    const slugPage = window.location.pathname;
    const navItem = document.querySelector(`.nav-item a[href="${slugPage}"]`);
    if(navItem){
        navItem.classList.add('active');
    }
</script>
<script>
    document.querySelectorAll('.form-row').forEach(wrapper => {
        const input = wrapper.querySelector('.password');
        const icon = wrapper.querySelector('.toggle-password');
        if(icon && input) {
          console.log(icon);
            icon.addEventListener('click', () => {
          if (input.type === 'password') {
            input.type = '*';
            icon.classList.add('active');
          } else {
            input.type = 'password';
            icon.classList.remove('active');
          }
        });
        }
      });
</script>
<script>
   
    document.addEventListener('DOMContentLoaded', () => {
        const data = [
        {
            id:1,    
            name: 'Sam',
            role: 'viewer',
            email: 'sam@gmail.com',
            code: '65',
            phone: '900909',
            password: '1234',
            repass: '1234'
        },
        {
            id:2,    
            name: 'Lily Loh',
            role: 'viewer',
            email: 'lilylll@yahoo.com',
            code: '65',
            phone: '910909',
            password: '1234',
            repass: '1234'
        },

        ];
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
          }
          
         
          const itemId = getQueryParam("id");
          const item = data.find((item)=>item.id == itemId)
          console.log(item,'Itemmmmm')
        if(item.name){
               document.getElementById('userName').value = item.name;
                document.getElementById('userRole').value = item.role;
                document.getElementById('email').value = item.email;
                document.getElementById('country-code').value = item.code;
                document.getElementById('contact').value = item.phone;
                document.getElementById('password').value = item.password;
                document.getElementById('confirmPassword').value = item.repass;
        }
 
     
    });
    document.querySelector('.btn-add').addEventListener('click', function (event) {
        event.preventDefault();

        const userName = document.getElementById('userName').value.trim();
        const userRole = document.getElementById('userRole').value;
        const email = document.getElementById('email').value.trim();
        const contact = document.getElementById('contact').value.trim();
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        const errors = [];
        if (!userName) {
            errors.push('User Name is required.');
        }

        if (!userRole) {
            errors.push('User Role is required.');
        }

        if (!email || !validateEmail(email)) {
            errors.push('Please enter a valid email address.');
        }

        if (!contact || !/^\d{8}$/.test(contact)) {
            errors.push('Please enter a valid contact number (8 digits).');
        }

        if (password.length < 10) {
            errors.push('Password must be at least 10 characters long.');
        }
        
        
        if (!/[A-Z]/.test(password)) {
            errors.push('Password must contain at least one uppercase letter.');
        }

        if (!/[a-z]/.test(password)) {
            errors.push('Password must contain at least one lowercase letter.');
        }

        if (!/[0-9]/.test(password)) {
            errors.push('Password must contain at least one number.');
        }
        if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            errors.push('Password must contain at least one special character (e.g., !, @, #, etc.).');
        }
        if(password === userName){
            errors.push('Do not use your email or name')
        }
        if(password === email){
            errors.push('Do not use your email or name')
        }

        if (password !== confirmPassword) {
            errors.push('Passwords do not match.');
        }

        const errorElement = document.getElementById('error');
        errorElement.innerHTML = '';
        if (errors.length > 0) {
            const errorList = document.createElement('ul');
            errors.forEach(error => {
                const listItem = document.createElement('li');
                listItem.textContent = error;
                errorList.appendChild(listItem);
            });
            errorElement.appendChild(errorList);
            
            return;
        }

        // Nếu không có lỗi
        alert('User updated successfully!');
    });

    // Hàm kiểm tra định dạng email
    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
</script>
</html>